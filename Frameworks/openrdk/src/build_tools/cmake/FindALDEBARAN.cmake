# - Find Aldebaran library
# Find the native Aldebaran includes and library
# This module defines
#  ALDEBARAN_INCLUDE_DIR, where to find tiff.h, etc.
#  ALDEBARAN_LIBRARIES, libraries to link against to use Aldebaran.
#  ALDEBARAN_FOUND, If false, do not try to use Aldebaran.
#  also defined, but not for general use are
#  ALDEBARAN_LIBRARY, where to find the Aldebaran library.

set(ALDEBARAN_FOUND 0)
if(${OpenRDK_ARCH} STREQUAL "geode" OR ${OpenRDK_ARCH} STREQUAL "atom" OR ${OpenRDK_ARCH} STREQUAL "generic")
	set( AL_DIR "${ROOT_ALDEBARAN}" CACHE INTERNAL "Root directory for Aldebaran libraries")
	if(NOT "x$ENV{AL_DIR}x" STREQUAL "xx" )
		set( AL_DIR $ENV{AL_DIR} )
		set(ROOT_ALDEBARAN "${AL_DIR}" CACHE STRING "Root directory for Aldebaran libraries" FORCE)
	endif(NOT "x$ENV{AL_DIR}x" STREQUAL "xx" )
					
		if(EXISTS "${AL_DIR}")
		
		### NaoQi 1.12.3 requires Cmake version bigger that 2.8.3
		CMAKE_MINIMUM_REQUIRED(VERSION 2.8.3 FATAL_ERROR)
		
			if (NOT ("${CMAKE_CROSSCOMPILING}" STREQUAL "TRUE" OR "${CMAKE_CROSSCOMPILING}" STREQUAL "ON"))
				# I really hate Aldebaran... (so say we all...)
				include( "${AL_DIR}/toolchain-pc.cmake" )
				set(T001CHAIN_DIR ${AL_DIR}/lib)
				include(${AL_DIR}/share/cmake/qibuild/general.cmake)
			endif (NOT ("${CMAKE_CROSSCOMPILING}" STREQUAL "TRUE" OR "${CMAKE_CROSSCOMPILING}" STREQUAL "ON"))

			### This are the dependencies for NaoQi 1.12.3
			set(AL_DEPS ALCOMMON;ALCORE;QI;ALMEMORYFASTACCESS;ALMATH;ALVALUE;ALTHREAD;ALTOOLS;ALFILE;NAOQI-PLUGINS-TOOLS;)

			if ("${CMAKE_CROSSCOMPILING}" STREQUAL "TRUE" OR "${CMAKE_CROSSCOMPILING}" STREQUAL "ON")
				set(AL_CMAKE_MODULE_PATH "${OE_CMAKE_MODULE_PATH2}")  
				set(AL_CMAKE_MODULE_PATHS "${OE_CMAKE_MODULE_PATH}")  
			else ("${CMAKE_CROSSCOMPILING}" STREQUAL "TRUE" OR "${CMAKE_CROSSCOMPILING}" STREQUAL "ON")
				set(AL_CMAKE_MODULE_PATH "${AL_DIR}/share/cmake")
				set(AL_CMAKE_MODULE_PATHS "${AL_CMAKE_MODULE_PATH}/qibuild/modules")
			endif ("${CMAKE_CROSSCOMPILING}" STREQUAL "TRUE" OR "${CMAKE_CROSSCOMPILING}" STREQUAL "ON")

			foreach(_dep ${AL_DEPS})
				find_package(_deps 
						NAMES ${_dep}					
						PATHS ${AL_CMAKE_MODULE_PATH} ${AL_CMAKE_MODULE_PATHS}
						NO_DEFAULT_PATH
						)
				list(APPEND _all_inc ${${_dep}_INCLUDE_DIRS})
				list(APPEND _all_lib ${${_dep}_LIBRARIES})
				list(APPEND _all_dep ${${_dep}_DEPENDS})
				#info("${_dep}-found - ${${_dep}_PACKAGE_FOUND}")
			endforeach(_dep ${AL_DEPS})		
			
			list(REMOVE_DUPLICATES _all_dep)
			list(REMOVE_ITEM _all_dep ${AL_DEPS})
			#message("%%%% List of all dependencies - ${_all_dep}")
	
			foreach(_dep ${_all_dep})
				find_package(_deps 
						NAMES ${_dep}					
						PATHS ${AL_CMAKE_MODULE_PATH} ${AL_CMAKE_MODULE_PATHS}
						NO_DEFAULT_PATH
						)
				list(APPEND _all_inc ${${_dep}_INCLUDE_DIRS})
				list(APPEND _all_lib ${${_dep}_LIBRARIES})
				#info("${_dep}-found - ${${_dep}_PACKAGE_FOUND}")
			endforeach(_dep ${_all_dep})

			list(REMOVE_DUPLICATES _all_inc)
			set(ALDEBARAN_INCLUDE_DIR ${_all_inc})
			list(REMOVE_DUPLICATES _all_lib)
			set(ALDEBARAN_LIBRARIES ${_all_lib})

			set(ALDEBARAN_FOUND 1)
		endif(EXISTS "${AL_DIR}")

endif(${OpenRDK_ARCH} STREQUAL "geode" OR ${OpenRDK_ARCH} STREQUAL "atom" OR ${OpenRDK_ARCH} STREQUAL "generic")

# needed to avoid putting things in ccmake gui
set(CMAKE_BUILD_TYPE "${CMAKE_BUILD_TYPE}" CACHE STRING "" FORCE)
set(ROOT_ALDEBARAN "${ROOT_ALDEBARAN}" CACHE INTERNAL "" FORCE)
set(ALCOMMON_DEPENDS "${ALCOMMON_DEPENDS}" CACHE INTERNAL "" FORCE)
set(ALCOMMON_tempdebug "${ALCOMMON_tempdebug}" CACHE INTERNAL "" FORCE)
set(ALMATH_DEPENDS "${ALMATH_DEPENDS}" CACHE INTERNAL "" FORCE)
set(ALMATH_tempdebug "${ALMATH_tempdebug}" CACHE INTERNAL "" FORCE)
set(ALVALUE_DEPENDS "${ALVALUE_DEPENDS}" CACHE INTERNAL "" FORCE)
set(ALVALUE_tempdebug "${ALVALUE_tempdebug}" CACHE INTERNAL "" FORCE)
set(ALLOG_DEPENDS "${ALLOG_DEPENDS}" CACHE INTERNAL "" FORCE)
set(ALLOG_tempdebug "${ALLOG_tempdebug}" CACHE INTERNAL "" FORCE)
set(AL_INC_DIR "${AL_INC_DIR}" CACHE INTERNAL "" FORCE)
set(ASCIIDOC_EXECUTABLE "${ASCIIDOC_EXECUTABLE}" CACHE INTERNAL "" FORCE)
set(BUILD_SHARED_LIBS "${BUILD_SHARED_LIBS}" CACHE INTERNAL "" FORCE)
set(DOXYGEN_DIR "${DOXYGEN_DIR}" CACHE INTERNAL "" FORCE)
set(LIBCORE_DEPENDS "${LIBCORE_DEPENDS}" CACHE INTERNAL "" FORCE)
set(LIBCORE_tempdebug "${LIBCORE_tempdebug}" CACHE INTERNAL "" FORCE)
set(LIBFACTORY_DEPENDS "${LIBFACTORY_DEPENDS}" CACHE INTERNAL "" FORCE)
set(LIBFACTORY_tempdebug "${LIBFACTORY_tempdebug}" CACHE INTERNAL "" FORCE)
set(LIBFINDIPPC_DEPENDS "${LIBFINDIPPC_DEPENDS}" CACHE INTERNAL "" FORCE)
set(LIBFINDIPPC_tempdebug "${LIBFINDIPPC_tempdebug}" CACHE INTERNAL "" FORCE)
set(LIBIPPC_DEPENDS "${LIBIPPC_DEPENDS}" CACHE INTERNAL "" FORCE)
set(LIBIPPC_tempdebug "${LIBIPPC_tempdebug}" CACHE INTERNAL "" FORCE)
set(LIBSOAP_DEPENDS "${LIBSOAP_DEPENDS}" CACHE INTERNAL "" FORCE)
set(LIBSOAP_tempdebug "${LIBSOAP_tempdebug}" CACHE INTERNAL "" FORCE)
set(LIBTHREAD_DEPENDS "${LIBTHREAD_DEPENDS}" CACHE INTERNAL "" FORCE)
set(LIBTHREAD_tempdebug "${LIBTHREAD_tempdebug}" CACHE INTERNAL "" FORCE)
set(LIBVISION_DEPENDS "${LIBVISION_DEPENDS}" CACHE INTERNAL "" FORCE)
set(LIBVISION_tempdebug "${LIBVISION_tempdebug}" CACHE INTERNAL "" FORCE)
set(LIBFILE_DEPENDS "${LIBFILE_DEPENDS}" CACHE INTERNAL "" FORCE)
set(LIBFILE_tempdebug "${LIBFILE_tempdebug}" CACHE INTERNAL "" FORCE)
set(LAUNCHSHELLCMDLINUX_DEPENDS "${LAUNCHSHELLCMDLINUX_DEPENDS}" CACHE INTERNAL "" FORCE)
set(LAUNCHSHELLCMDLINUX_tempdebug "${LAUNCHSHELLCMDLINUX_tempdebug}" CACHE INTERNAL "" FORCE)
set(SHMPOOL_DEPENDS "${SHMPOOL_DEPENDS}" CACHE INTERNAL "" FORCE)
set(SHMPOOL_tempdebug "${SHMPOOL_tempdebug}" CACHE INTERNAL "" FORCE)
set(PROXIES_DEPENDS "${PROXIES_DEPENDS}" CACHE INTERNAL "" FORCE)
set(RTTOOLS_DEPENDS "${RTTOOLS_DEPENDS}" CACHE INTERNAL "" FORCE)
set(RTTOOLS_tempdebug "${RTTOOLS_tempdebug}" CACHE INTERNAL "" FORCE)
set(TINYXML_DEPENDS "${TINYXML_DEPENDS}" CACHE INTERNAL "" FORCE)
set(TINYXML_tempdebug "${TINYXML_tempdebug}" CACHE INTERNAL "" FORCE)
set(TOOLCHAIN_DIR "${TOOLCHAIN_DIR}" CACHE INTERNAL "" FORCE)
set(TOOLS_DEPENDS "${TOOLS_DEPENDS}" CACHE INTERNAL "" FORCE)
set(TOOLS_tempdebug "${TOOLS_tempdebug}" CACHE INTERNAL "" FORCE)
set(WIN_LAYOUT_SDK_BIN "${WIN_LAYOUT_SDK_BIN}" CACHE INTERNAL "" FORCE)
set(WIN_LAYOUT_SDK_CMAKE "${WIN_LAYOUT_SDK_CMAKE}" CACHE INTERNAL "" FORCE)
set(WIN_LAYOUT_SDK_CMAKE_MODULES "${WIN_LAYOUT_SDK_CMAKE_MODULES}" CACHE INTERNAL "" FORCE)
set(WIN_LAYOUT_SDK_CONF "${WIN_LAYOUT_SDK_CONF}" CACHE INTERNAL "" FORCE)
set(WIN_LAYOUT_SDK_DOC "${WIN_LAYOUT_SDK_DOC}" CACHE INTERNAL "" FORCE)
set(WIN_LAYOUT_SDK_INCLUDE "${WIN_LAYOUT_SDK_INCLUDE}" CACHE INTERNAL "" FORCE)
set(WIN_LAYOUT_SDK_LIB "${WIN_LAYOUT_SDK_LIB}" CACHE INTERNAL "" FORCE)
set(WIN_LAYOUT_SDK_SHARE "${WIN_LAYOUT_SDK_SHARE}" CACHE INTERNAL "" FORCE)
set(_SDK_FRAMEWORK "${_SDK_FRAMEWORK}" CACHE INTERNAL "" FORCE)
set(GIT_DIR "${GIT_DIR}" CACHE INTERNAL "" FORCE)
set(DISABLE_PRECOMPILED_HEADERS "${DISABLE_PRECOMPILED_HEADERS}" CACHE INTERNAL "" FORCE)
set(DOXYGEN_EXECUTABLE "${DOXYGEN_EXECUTABLE}" CACHE INTERNAL "" FORCE)
set(ALCOMMON_LIBRARY "${ALCOMMON_LIBRARY}" CACHE INTERNAL "" FORCE)
set(ALCOMMON_DEBUG_LIBRARY "${ALCOMMON_DEBUG_LIBRARY}" CACHE INTERNAL "" FORCE)
set(ALERROR_DEBUG_LIBRARY "${ALERROR_DEBUG_LIBRARY}" CACHE INTERNAL "" FORCE)
set(ALERROR_LIBRARY "${ALERROR_LIBRARY}" CACHE INTERNAL "" FORCE)
set(ALFILE_DEBUG_LIBRARY "${ALFILE_DEBUG_LIBRARY}" CACHE INTERNAL "" FORCE)
set(ALFILE_LIBRARY "${ALFILE_LIBRARY}" CACHE INTERNAL "" FORCE)
set(ALLOGREMOTE_DEBUG_LIBRARY "${ALLOGREMOTE_DEBUG_LIBRARY}" CACHE INTERNAL "" FORCE)
set(ALLOGREMOTE_LIBRARY "${ALLOGREMOTE_LIBRARY}" CACHE INTERNAL "" FORCE)
set(ALMATH_DEBUG_LIBRARY "${ALMATH_DEBUG_LIBRARY}" CACHE INTERNAL "" FORCE)
set(ALMATH_LIBRARY "${ALMATH_LIBRARY}" CACHE INTERNAL "" FORCE)
set(ALMEMORYFASTACCESS_DEBUG_LIBRARY "${ALMEMORYFASTACCESS_DEBUG_LIBRARY}" CACHE INTERNAL "" FORCE)
set(ALMEMORYFASTACCESS_LIBRARY "${ALMEMORYFASTACCESS_LIBRARY}" CACHE INTERNAL "" FORCE)
set(ALSOAP_DEBUG_LIBRARY "${ALSOAP_DEBUG_LIBRARY}" CACHE INTERNAL "" FORCE)
set(ALSOAP_LIBRARY "${ALSOAP_LIBRARY}" CACHE INTERNAL "" FORCE)
set(ALTHREAD_DEBUG_LIBRARY "${ALTHREAD_DEBUG_LIBRARY}" CACHE INTERNAL "" FORCE)
set(ALTHREAD_LIBRARY "${ALTHREAD_LIBRARY}" CACHE INTERNAL "" FORCE)
set(ALTOOLS_DEBUG_LIBRARY "${ALTOOLS_DEBUG_LIBRARY}" CACHE INTERNAL "" FORCE)
set(ALTOOLS_LIBRARY "${ALTOOLS_LIBRARY}" CACHE INTERNAL "" FORCE)
set(ALVALUE_DEBUG_LIBRARY "${ALVALUE_DEBUG_LIBRARY}" CACHE INTERNAL "" FORCE)
set(ALVALUE_LIBRARY "${ALVALUE_LIBRARY}" CACHE INTERNAL "" FORCE)
set(QI_LIBRARY "${QI_LIBRARY}" CACHE INTERNAL "" FORCE)
set(QI_DEBUG_LIBRARY "${QI_DEBUG_LIBRARY}" CACHE INTERNAL "" FORCE)
set(RTTOOLS_DEBUG_LIBRARY "${RTTOOLS_DEBUG_LIBRARY}" CACHE INTERNAL "" FORCE)
set(RTTOOLS_LIBRARY "${RTTOOLS_LIBRARY}" CACHE INTERNAL "" FORCE)
set(TINYXML_DEBUG_LIBRARY "${TINYXML_DEBUG_LIBRARY}" CACHE INTERNAL "" FORCE)
set(TINYXML_LIBRARY "${TINYXML_LIBRARY}" CACHE INTERNAL "" FORCE)
set(CCACHE "${CCACHE}" CACHE INTERNAL "" FORCE)
set(_deps_DIR "${_deps_DIR}" CACHE INTERNAL "" FORCE)
set(boost_filesystem-mt_LIB "${boost_filesystem-mt_LIB}" CACHE INTERNAL "" FORCE)
set(boost_date_time-mt_LIB "${boost_date_time-mt_LIB}" CACHE INTERNAL "" FORCE)
set(boost_program_options-mt_LIB "${bboost_program_options-mt_LIB}" CACHE INTERNAL "" FORCE)
set(boost_signals-mt_LIB "${boost_signals-mt_LIB}" CACHE INTERNAL "" FORCE)
set(boost_system-mt_LIB "${boost_system-mt_LIB}" CACHE INTERNAL "" FORCE)
set(boost_thread-mt_LIB "${boost_thread-mt_LIB}" CACHE INTERNAL "" FORCE)
set(dl_LIB "${dl_LIB}" CACHE INTERNAL "" FORCE)
set(pthread_LIB "${pthread_LIB}" CACHE INTERNAL "" FORCE)
set(python27_LIB "${python27_LIB}" CACHE INTERNAL "" FORCE)
set(qibuild_DIR "${qibuild_DIR}" CACHE INTERNAL "" FORCE)
set(brt_LIB "${rt_LIB}" CACHE INTERNAL "" FORCE)
set(uuid_LIB "${uuid_LIB}" CACHE INTERNAL "" FORCE)
set(zmq_LIB "${zmq_LIB}" CACHE INTERNAL "" FORCE)
set(rt_LIB "${rt_LIB}" CACHE INTERNAL "" FORCE)
set(python27_d_LIB "${python27_d_LIB}" CACHE INTERNAL "" FORCE)
set(xml2_LIB "${xml2_LIB}" CACHE INTERNAL "" FORCE)
